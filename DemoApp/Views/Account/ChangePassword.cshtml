@model DemoApp.ViewModels.ChangePasswordViewModel
@{
    ViewData["Title"] = "Đổi mật khẩu";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="~/css/Profile.css" />

<div class="profile-container">
    <div class="profile-header">
        <div class="profile-header-content">
            <div class="profile-welcome">
                <h1>Đổi mật khẩu</h1>
                <p>Cập nhật mật khẩu của bạn</p>
            </div>
            <a asp-action="Profile" class="btn-logout">← Quay lại</a>
        </div>
    </div>

    <div class="profile-content">
        <div style="max-width: 600px; margin: -3rem auto 0;">
            <div class="profile-main">
                <h2 class="section-title">Thay đổi mật khẩu</h2>

                <!-- QUAN TRỌNG: Sửa form action -->
                <form asp-action="ChangePassword" method="post">
                    @Html.AntiForgeryToken()

                    <!-- Hiển thị lỗi tổng quan -->
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <div class="form-group">
                        <label asp-for="CurrentPassword" class="info-label"></label>
                        <input asp-for="CurrentPassword" class="form-control" type="password" placeholder="Nhập mật khẩu hiện tại" />
                        <span asp-validation-for="CurrentPassword" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="NewPassword" class="info-label"></label>
                        <input asp-for="NewPassword" class="form-control" type="password" placeholder="Nhập mật khẩu mới" />
                        <span asp-validation-for="NewPassword" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="ConfirmPassword" class="info-label"></label>
                        <input asp-for="ConfirmPassword" class="form-control" type="password" placeholder="Nhập lại mật khẩu mới" />
                        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                    </div>

                    <div class="password-tips" style="background: #f0f9ff; padding: 1.5rem; border-radius: 12px; margin: 1.5rem 0; border-left: 4px solid #3b82f6;">
                        <h4 style="color: #1e293b; margin-bottom: 0.8rem; font-size: 1rem;">💡 Gợi ý mật khẩu mạnh:</h4>
                        <ul style="color: #475569; font-size: 0.9rem; padding-left: 1.5rem;">
                            <li>Ít nhất 6 ký tự</li>
                            <li>Kết hợp chữ hoa, chữ thường và số</li>
                            <li>Không sử dụng thông tin cá nhân dễ đoán</li>
                        </ul>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary">🔒 Đổi mật khẩu</button>
                        <a asp-action="Profile" class="btn-secondary" style="text-align: center; text-decoration: none; display: inline-block;">Hủy bỏ</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}